version: "3"
services:

  mariadb01:
    image: mariadb
    container_name: orders-service01
    ports:
      - 3300:3306
    volumes:
      - ./db/conf.d/orders-service01:/etc/mysql/conf.d
      - ./db/data/orders-service01:/var/lib/mysql
    env_file:
      - .env
    networks:
      - backend
    environment:
      TZ: Asia/Seoul
    restart: always

  mariadb02:
    image: mariadb
    container_name: orders_service02
    ports:
      - 3301:3306
    volumes:
      - ./db/conf.d/orders-service02:/etc/mysql/conf.d
      - ./db/data/orders-service02:/var/lib/mysql
    env_file:
      - .env
    networks:
      - backend
    environment:
      TZ: Asia/Seoul
    restart: always

  mariadb03:
    image: mariadb
    container_name: catalogs_service
    ports:
      - 3302:3306
    volumes:
      - ./db/conf.d/catalogs-service:/etc/mysql/conf.d
      - ./db/data/catalogs-service:/var/lib/mysql
    env_file:
      - .env
    networks:
      - backend
    environment:
      TZ: Asia/Seoul
    restart: always

networks:
  backend: